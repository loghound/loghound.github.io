<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Workout Dashboard</title>
  <!-- Bootstrap for basic styling -->
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
  <style>
    body {
      margin: 20px;
    }
    #chart {
      width: 100%;
      height: 600px;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1 class="mb-4">Workout Dashboard</h1>
    <div id="chart"></div>
  </div>

  <!-- Load d3.js and Plotly.js libraries -->
  <script src="https://d3js.org/d3.v5.min.js"></script>
  <script src="https://cdn.plot.ly/plotly-3.0.0.min.js"></script>
  <script>
    // Load the CSV file dynamically
    d3.csv("workout.csv").then(function(data) {
      // Log the data for debugging purposes
      console.log("CSV Data:", data);
      
      // Assume the CSV contains at least two columns: Date and Exercise.
      // Convert the Date strings into JavaScript Date objects.
      data.forEach(function(d) {
        d.Date = new Date(d.startDate);
      });

      // Create a scatter trace where each point represents a workout.
      // X-axis is the workout date and Y-axis is the workout type.
      var trace = {
        x: data.map(d => d.Date),
        y: data.map(d => d.workoutActivityType),
        mode: 'markers',
        type: 'scatter',
        marker: {
          size: 10,
          opacity: 0.7,
          color: '#007bff'
        },
        // Custom hover text showing the date and exercise type
        text: data.map(d => "Date: " + d.Date.toLocaleDateString() + "<br>Exercise: " + d.Exercise),
        hoverinfo: 'text'
      };

      // Define the layout with a title and axis labels.
      var layout = {
        title: 'Workout Types Over Time',
        xaxis: {
          title: 'Date',
          type: 'date'
        },
        yaxis: {
          title: 'Workout Type',
          automargin: true
        },
        hovermode: 'closest'
      };

      // Render the interactive Plotly chart inside the "chart" div.
      Plotly.newPlot('chart', [trace], layout);
    }).catch(function(error) {
      console.error("Error loading CSV file:", error);
    });
  </script>
</body>
</html>
